{% extends 'layout.twig' %}

{% block css %}

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
  <link rel='stylesheet' href='/stylesheets/css/style.css' type="text/css"/>
  <link href="https://use.fontawesome.com/releases/v5.3.0/css/all.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cryptofont@0.1.1/css/cryptofont.min.css" integrity="sha256-oCoKY2h9AOXXZhYYsaRAPpfr+Yw4vkcJqp5hxWnizBQ=" crossorigin="anonymous">
  <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.css">
  <link href="https://unpkg.com/nprogress@0.2.0/nprogress.css" rel="stylesheet" />

{% endblock %}

{% block scripts %}

  <script src="https://unpkg.com/nprogress@0.2.0/nprogress.js"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue"></script>
  <script src="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.js"></script>
  <script defer src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  <script defer src="https://use.fontawesome.com/releases/v5.3.0/js/all.js"></script>
  <script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.0/anime.min.js" integrity="sha512-LfB+BcvR3zBt7ebVskhSWiSbEUiG3p5EcCprkieldsKhBeR6wpnLi0VpWC2GNgVGWP2n/skO8Bx2oKNjUhXCkw==" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/barn/0.2.3/barn.min.js" integrity="sha512-2ra4TtMIHkMHZ69G8aL4dfkOTPXoe3YKtaDyaxFIo7OqIoM5Bcaj3d/oaZ5jjNUKooDwqS/FpwweY/iIa7Mzqg==" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/async/3.2.0/async.min.js" integrity="sha512-6K6+H87tLdCWvY5ml9ZQXLRlPlDEt8uXmtELhuJRgFyEDv6JvndWHg3jadJuBVGPEhhA2AAt+ROMC2V7EvTIWw==" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.2/axios.min.js" integrity="sha512-VZ6m0F78+yo3sbu48gElK4irv2dzPoep8oo9LEjxviigcnnnNvnTOJRSrIhuFk68FMLOpiNz+T77nNY89rnWDg==" crossorigin="anonymous"></script>
  <script defer src="//cdnjs.cloudflare.com/ajax/libs/validate.js/0.13.1/validate.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.43/Tone.js" integrity="sha512-EykMJ8DUk41zHUpEBrlm8oWxXqmQXi5dKBvuaEiziqFMrcfGYsXz1KwBMA+ejy6noTfwVGwer1WSYrbNBrjT2w==" crossorigin="anonymous"></script>

  <script src="/javascripts/WebSocket.js"></script>
  <script src="/javascripts/parseParams.js"></script>
  <script src="/javascripts/pswd.js"></script>
  <script src="/javascripts/vuejs/main.js"></script>

{% endblock %}

{% block body %}

  <section class="content">
    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-3 col-lg-2">
          <div class="block-section">
            <div class="header">
              Crypto Pairs
            </div>
            <div class="block">
              <div id="markets">
                <div v-if="markets">
                  <div v-for="pair in markets">
                    <div class="pair-container">
                      <b>
                        <i v-bind:class="pair.info.base_currency | cryptofont"></i>
                        <span>${pair.symbol}</span>
                      </b>
                      <span class="right">
                      <span class="span-taker">${pair.taker}</span>
                      <span class="span-maker">${pair.maker}</span>
                    </span>
                    </div>
                  </div>
                </div>
                <div v-else class="no-content">
                  <img src="/images/bitcoin.png" alt="">
                  <h5>No currency pairs</h5>
                  <small>There is no information about currency pairs on this exchange</small>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-9 col-md-6">
          <div class="block-section">
            <div class="header">

              <select id="toolbar-select-chart" @change="toggle($event)">
                <option v-for="exchange in exchanges" v-bind:value="exchange.value">${exchange.pair} ${exchange.name}</option>
              </select>

              <span v-on:click="toggle" id="toolbar-sound-on-change-price" v-bind:style="{color: turn ? 'white' : 'gray'}">
                <i class="fas fa-volume toolbar-icon-toggle"></i>
              </span>

              <div class="right">
                <span id="priceStat">
                  <span class="price-info">
                    Price change:
                    <span class="change-price">${change}$</span>
                  </span>
                   <span class="price-info">
                    Volume (BTC):
                    <span class="default-price">${volume}</span>
                  </span>
                  <span class="price-info">
                    High:
                    <span class="high-price">${high}$</span>
                  </span>
                  <span class="price-info">
                    Low:
                    <span class="low-price">${low}$</span>
                  </span>
              </span>
              </div>
            </div>
            <div class="block">

              <div id="vue-chart-price">
                <div id="price_chart"></div>
              </div>

              <div id="vue-chart-indicator-rvi">
                <span class="indicator-name">RVI</span>
                <div id="indicators_chart_rvi"> </div>
              </div>

              <div id="vue-chart-indicator-macd">
                 <span class="indicator-name">MACD</span>
                <div id="indicators_chart_macd"></div>
              </div>


              <div id="vue-chart-indicator-mvrvzscope">
                <span class="indicator-name">MVRV Z-Scope</span>
                <div id="indicators_chart_mvrvzscope"></div>
              </div>

            </div>
          </div>
        </div>
        <div class="col-sm-6 col-md-3 col-lg-2">
          <div class="block-section">
            <div class="header">
              Terminal Deals
            </div>
            <div class="block">
              <div v-if="false"></div>
              <div v-else class="no-content">
                <img src="/images/money.png" alt="">
                <h5>Empty</h5>
                <small>You don't have any open orders at this time.</small>
              </div>
            </div>
          </div>
          <div class="block-section">
            <div class="header">
              News
            </div>
            <div class="block" id="feed">
              <div v-if="items">
                <div v-if="items" v-for="post in items" class="post-body">
                  <h5>${post.title}</h5>
                  <small class="feed-description">${post.description}</small>
                </div>
              </div>
              <div v-else class="no-content">
                <img src="/images/text-lines.png" alt="">
                <h5>No news yet.</h5>
                <small>No news in the world of cryptology yet.</small>
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-md-12 col-lg-2">
          <div class="block-section">
            <div class="header">
              Exchange OrderBook
            </div>
            <div class="block" id="ordersBook">

              <div v-for="item in asks" class="orderAsk">
                <span class="left" v-bind:style="{width: item[1]/1000 > 70 ? 70 : item[1]/1000 + '%'}">
                  ${item[0]}
                </span>
                <span class="right">
                  ${item[1]}
                </span>
              </div>

              <div v-for="item in bids" class="orderBids">
                 <span class="left" v-bind:style="{width: item[1]/1000 > 70 ? 70 : item[1]/1000 + '%'}">
                  ${item[0]}
                </span>
                <span class="right">
                  ${item[1]}
                </span>
              </div>

            </div>
          </div>
        </div>
      </div>
    </div>

  </section>

{% endblock %}